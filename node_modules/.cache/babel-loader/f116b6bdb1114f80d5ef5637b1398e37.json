{"ast":null,"code":"import { defineComponent, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nexport default defineComponent({\n  props: ['name', 'msg'],\n\n  setup() {\n    const canvas = document.getElementById('canvas');\n    onMounted(() => {\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = '/img/sakura.jpeg';\n\n      img.onload = function () {\n        const store = useStore();\n        const nameData = store.state.name != '' ? store.state.name + 'さん' : '';\n        const msgData = store.state.msg; //画像サイズ取得\n\n        const imgWidth = img.width;\n        const imgHeight = img.height; //canvasサイズ取得\n\n        const canWidth = canvas.width; //画像をcanvasサイズに合わせて描画するために縦横比を取得\n\n        const compression = canWidth / imgWidth;\n        const compHeight = compression * imgHeight; //画像描画\n\n        ctx.drawImage(img, 0, 0, canWidth, compHeight); //文字設定\n\n        ctx.font = \"60px 'Kosugi Maru'\";\n        ctx.textAlign = \"left\"; // 左右中央\n\n        ctx.textBaseline = \"middle\"; // 上下中央\n        //文字描画\n\n        ctx.fillText(nameData, 50, 80, 500);\n        ctx.fillText(msgData, 50, 580, 500);\n      };\n    });\n\n    const canDownload = () => {\n      const dlLink = document.getElementById('download_link');\n      const canvas = document.getElementById('canvas');\n      dlLink.href = canvas.toDataURL();\n      dlLink.download = 'sakura.jpeg';\n    };\n\n    return {\n      canDownload\n    };\n  }\n\n});","map":{"version":3,"mappings":"AAUA,SAASA,eAAT,EAA0BC,SAA1B,QAA2C,KAA3C;AACA,SAASC,QAAT,QAAyB,MAAzB;AAEA,eAAeF,eAAe,CAAC;AAC7BG,OAAK,EAAE,CACL,MADK,EAEL,KAFK,CADsB;;AAK7BC,OAAK,GAAG;AACJ,UAAMC,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACFN,aAAS,CAAC,MAAM;AACd,YAAMO,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;AACA,YAAMC,GAAE,GAAI,IAAIC,KAAJ,EAAZ;AACAD,SAAG,CAACE,GAAJ,GAAU,kBAAV;;AAEAF,SAAG,CAACG,MAAJ,GAAa,YAAW;AACtB,cAAMC,KAAI,GAAIZ,QAAQ,EAAtB;AACA,cAAMa,QAAO,GAAKD,KAAK,CAACE,KAAN,CAAYC,IAAZ,IAAmB,EAApB,GAA0BH,KAAK,CAACE,KAAN,CAAYC,IAAZ,GAAmB,IAA7C,GAAoD,EAArE;AACA,cAAMC,OAAM,GAAIJ,KAAK,CAACE,KAAN,CAAYG,GAA5B,CAHsB,CAKtB;;AACA,cAAMC,QAAO,GAAIV,GAAG,CAACW,KAArB;AACA,cAAMC,SAAQ,GAAIZ,GAAG,CAACa,MAAtB,CAPsB,CAQtB;;AACA,cAAMC,QAAO,GAAInB,MAAM,CAACgB,KAAxB,CATsB,CAUtB;;AACA,cAAMI,WAAU,GAAID,QAAO,GAAIJ,QAA/B;AACA,cAAMM,UAAS,GAAKD,WAAU,GAAIH,SAAlC,CAZsB,CAatB;;AACAd,WAAG,CAACmB,SAAJ,CAAcjB,GAAd,EAAmB,CAAnB,EAAsB,CAAtB,EAAyBc,QAAzB,EAAmCE,UAAnC,EAdsB,CAetB;;AACAlB,WAAG,CAACoB,IAAJ,GAAW,oBAAX;AACApB,WAAG,CAACqB,SAAJ,GAAgB,MAAhB,CAjBsB,CAiBS;;AAC/BrB,WAAG,CAACsB,YAAJ,GAAmB,QAAnB,CAlBsB,CAkBS;AAC/B;;AACAtB,WAAG,CAACuB,QAAJ,CAAahB,QAAb,EAAuB,EAAvB,EAA2B,EAA3B,EAA+B,GAA/B;AACAP,WAAG,CAACuB,QAAJ,CAAab,OAAb,EAAsB,EAAtB,EAA0B,GAA1B,EAA+B,GAA/B;AACF,OAtBA;AAuBD,KA5BQ,CAAT;;AA8BA,UAAMc,WAAU,GAAI,MAAM;AACxB,YAAMC,MAAK,GAAI3B,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAf;AACA,YAAMF,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACA0B,YAAM,CAACC,IAAP,GAAc7B,MAAM,CAAC8B,SAAP,EAAd;AACAF,YAAM,CAACG,QAAP,GAAkB,aAAlB;AACF,KALA;;AAOA,WAAO;AACLJ;AADK,KAAP;AAGD;;AA/C4B,CAAD,CAA9B","names":["defineComponent","onMounted","useStore","props","setup","canvas","document","getElementById","ctx","getContext","img","Image","src","onload","store","nameData","state","name","msgData","msg","imgWidth","width","imgHeight","height","canWidth","compression","compHeight","drawImage","font","textAlign","textBaseline","fillText","canDownload","dlLink","href","toDataURL","download"],"sourceRoot":"","sources":["/Users/nao/Desktop/t-project/src/views/FrameView.vue"],"sourcesContent":["<template>\n  <div class=\"frame\">\n    <canvas id=\"canvas\" width=\"1024\" height=\"683\"></canvas>\n  </div>\n  <div class=\"download\">\n    <a href=\"\" download=\"\" id=\"download_link\" @click=\"canDownload\">ダウンロード</a>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, onMounted } from 'vue';\nimport { useStore } from 'vuex'\n\nexport default defineComponent({\n  props: [\n    'name',\n    'msg'\n  ],\n  setup() {\n      const canvas = document.getElementById('canvas');\n    onMounted(() => {\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = '/img/sakura.jpeg';\n      \n      img.onload = function() {\n        const store = useStore();\n        const nameData = (store.state.name !='') ? store.state.name + 'さん' : '';\n        const msgData = store.state.msg;\n\n        //画像サイズ取得\n        const imgWidth = img.width;\n        const imgHeight = img.height;\n        //canvasサイズ取得\n        const canWidth = canvas.width;\n        //画像をcanvasサイズに合わせて描画するために縦横比を取得\n        const compression = canWidth / imgWidth;\n        const compHeight  = compression * imgHeight;\n        //画像描画\n        ctx.drawImage(img, 0, 0, canWidth, compHeight);\n        //文字設定\n        ctx.font = \"60px 'Kosugi Maru'\";\n        ctx.textAlign = \"left\";        // 左右中央\n        ctx.textBaseline = \"middle\";   // 上下中央\n        //文字描画\n        ctx.fillText(nameData, 50, 80, 500);\n        ctx.fillText(msgData, 50, 580, 500);\n      }\n    });\n    \n    const canDownload = () => {\n      const dlLink = document.getElementById('download_link');\n      const canvas = document.getElementById('canvas');\n      dlLink.href = canvas.toDataURL();\n      dlLink.download = 'sakura.jpeg';\n    }   \n\n    return {\n      canDownload\n    }\n  },\n})\n</script>\n\n<style scoped>\n.frame {\n  width: 90%;\n  margin: 10vh auto 0;\n  position: relative;\n}\n.frame canvas {\n  display: block;\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}