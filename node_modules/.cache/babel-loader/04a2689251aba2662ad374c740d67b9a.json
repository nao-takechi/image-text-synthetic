{"ast":null,"code":"import { defineComponent, ref, onMounted } from 'vue';\nexport default defineComponent({\n  props: ['name', 'msg'],\n\n  setup(props, context) {\n    onMounted(() => {\n      const nameData = props.name;\n      const msgData = props.msg;\n      const canvas = document.getElementById('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.src = '/img/sakura.jpeg';\n\n      img.onload = function () {\n        //画像サイズ取得\n        const imgWidth = img.width;\n        const imgHeight = img.height; //canvasサイズ取得\n\n        const canWidth = canvas.width; //画像をcanvasサイズに合わせて描画するために縦横比を取得\n\n        const compression = canWidth / imgWidth;\n        const compHeight = compression * imgHeight; //画像描画\n\n        ctx.drawImage(img, 0, 0, canWidth, compHeight); //文字設定\n\n        ctx.font = \"60px 'Kosugi Maru'\";\n        ctx.textAlign = \"left\"; // 左右中央\n\n        ctx.textBaseline = \"middle\"; // 上下中央\n        //文字描画\n\n        ctx.fillText(nameData, 50, 80, 500);\n        ctx.fillText(msgData, 50, 580, 500);\n      };\n    });\n\n    const canDownload = () => {\n      const dlLink = document.getElementById('download_link');\n      const canvas = document.getElementById('canvas');\n      dlLink.href = canvas.toDataURL();\n      dlLink.download = 'sakura.jpeg';\n    };\n\n    return {\n      canDownload\n    };\n  }\n\n});","map":{"version":3,"mappings":"AAUA,SAASA,eAAT,EAA0BC,GAA1B,EAA+BC,SAA/B,QAAgD,KAAhD;AAEA,eAAeF,eAAe,CAAC;AAC7BG,OAAK,EAAE,CACL,MADK,EAEL,KAFK,CADsB;;AAK7BC,OAAK,CAACD,KAAD,EAAQE,OAAR,EAAiB;AACpBH,aAAS,CAAC,MAAM;AACd,YAAMI,QAAO,GAAIH,KAAK,CAACI,IAAvB;AACA,YAAMC,OAAM,GAAIL,KAAK,CAACM,GAAtB;AACA,YAAMC,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACA,YAAMC,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;AAEA,YAAMC,GAAE,GAAI,IAAIC,KAAJ,EAAZ;AACAD,SAAG,CAACE,GAAJ,GAAU,kBAAV;;AAEAF,SAAG,CAACG,MAAJ,GAAa,YAAW;AACtB;AACA,cAAMC,QAAO,GAAIJ,GAAG,CAACK,KAArB;AACA,cAAMC,SAAQ,GAAIN,GAAG,CAACO,MAAtB,CAHsB,CAItB;;AACA,cAAMC,QAAO,GAAIb,MAAM,CAACU,KAAxB,CALsB,CAMtB;;AACA,cAAMI,WAAU,GAAID,QAAO,GAAIJ,QAA/B;AACA,cAAMM,UAAS,GAAKD,WAAU,GAAIH,SAAlC,CARsB,CAStB;;AACAR,WAAG,CAACa,SAAJ,CAAcX,GAAd,EAAmB,CAAnB,EAAsB,CAAtB,EAAyBQ,QAAzB,EAAmCE,UAAnC,EAVsB,CAWtB;;AACAZ,WAAG,CAACc,IAAJ,GAAW,oBAAX;AACAd,WAAG,CAACe,SAAJ,GAAgB,MAAhB,CAbsB,CAaS;;AAC/Bf,WAAG,CAACgB,YAAJ,GAAmB,QAAnB,CAdsB,CAcS;AAC/B;;AACAhB,WAAG,CAACiB,QAAJ,CAAaxB,QAAb,EAAuB,EAAvB,EAA2B,EAA3B,EAA+B,GAA/B;AACAO,WAAG,CAACiB,QAAJ,CAAatB,OAAb,EAAsB,EAAtB,EAA0B,GAA1B,EAA+B,GAA/B;AACF,OAlBA;AAmBD,KA5BQ,CAAT;;AA8BA,UAAMuB,WAAU,GAAI,MAAM;AACxB,YAAMC,MAAK,GAAIrB,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAf;AACA,YAAMF,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACAoB,YAAM,CAACC,IAAP,GAAcvB,MAAM,CAACwB,SAAP,EAAd;AACAF,YAAM,CAACG,QAAP,GAAkB,aAAlB;AACF,KALA;;AAOA,WAAO;AACLJ;AADK,KAAP;AAGD;;AA9C4B,CAAD,CAA9B","names":["defineComponent","ref","onMounted","props","setup","context","nameData","name","msgData","msg","canvas","document","getElementById","ctx","getContext","img","Image","src","onload","imgWidth","width","imgHeight","height","canWidth","compression","compHeight","drawImage","font","textAlign","textBaseline","fillText","canDownload","dlLink","href","toDataURL","download"],"sourceRoot":"","sources":["/Users/nao/Desktop/t-project/src/views/FrameView.vue"],"sourcesContent":["<template>\n  <div class=\"frame\">\n    <canvas id=\"canvas\" width=\"1024\" height=\"683\"></canvas>\n  </div>\n  <div class=\"download\">\n    <a href=\"\" download=\"\" id=\"download_link\" @click=\"canDownload\">ダウンロード</a>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from 'vue';\n\nexport default defineComponent({\n  props: [\n    'name',\n    'msg'\n  ],\n  setup(props, context) {\n    onMounted(() => {\n      const nameData = props.name;\n      const msgData = props.msg;\n      const canvas = document.getElementById('canvas');\n      const ctx = canvas.getContext('2d');\n\n      const img = new Image();\n      img.src = '/img/sakura.jpeg';\n      \n      img.onload = function() {\n        //画像サイズ取得\n        const imgWidth = img.width;\n        const imgHeight = img.height;\n        //canvasサイズ取得\n        const canWidth = canvas.width;\n        //画像をcanvasサイズに合わせて描画するために縦横比を取得\n        const compression = canWidth / imgWidth;\n        const compHeight  = compression * imgHeight;\n        //画像描画\n        ctx.drawImage(img, 0, 0, canWidth, compHeight);\n        //文字設定\n        ctx.font = \"60px 'Kosugi Maru'\";\n        ctx.textAlign = \"left\";        // 左右中央\n        ctx.textBaseline = \"middle\";   // 上下中央\n        //文字描画\n        ctx.fillText(nameData, 50, 80, 500);\n        ctx.fillText(msgData, 50, 580, 500);\n      }\n    });\n    \n    const canDownload = () => {\n      const dlLink = document.getElementById('download_link');\n      const canvas = document.getElementById('canvas');\n      dlLink.href = canvas.toDataURL();\n      dlLink.download = 'sakura.jpeg';\n    }   \n\n    return {\n      canDownload\n    }\n  },\n})\n</script>\n\n<style scoped>\n.frame {\n  width: 90%;\n  margin: 10vh auto 0;\n  position: relative;\n}\n.frame canvas {\n  display: block;\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}